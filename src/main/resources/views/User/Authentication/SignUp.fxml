<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.collections.FXCollections?>

<BorderPane fx:id="border" prefWidth="800.0" prefHeight="500.0" xmlns:fx="http://javafx.com/fxml" stylesheets="@signup.css" fx:controller="tn.esprit.Controllers.User.Authentication.SignUpController">

    <!-- Left pane remains unchanged -->
    <left>
        <AnchorPane fx:id="leftPane" prefWidth="400.0" styleClass="left-pane">
            <ImageView layoutX="50" layoutY="70" fitWidth="300" fitHeight="360" pickOnBounds="true" preserveRatio="true">
                <image>
                    <Image url="@/Images/farmer.png" />
                </image>
            </ImageView>
        </AnchorPane>
    </left>

    <center>
        <AnchorPane>
            <VBox fx:id="signupCard" alignment="CENTER" spacing="15" styleClass="login-card" prefWidth="400" layoutX="0" layoutY="20" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">

                <Label text="Créer un compte" styleClass="title" />

                <TextField fx:id="nomField" promptText="Nom" styleClass="input-field" />
                <TextField fx:id="prenomField" promptText="Prénom" styleClass="input-field" />
                <TextField fx:id="emailField" promptText="Email" styleClass="input-field" />

                <StackPane styleClass="input-field" alignment="CENTER_RIGHT" prefWidth="280">
                    <StackPane fx:id="passwordPane" alignment="CENTER_LEFT" style="-fx-pref-width: 100%;">
                        <PasswordField fx:id="passwordField" promptText="Mot de passe" style="-fx-pref-width: 100%;" />
                        <TextField fx:id="visiblePasswordField" promptText="Mot de passe" style="-fx-pref-width: 100%;" visible="false" managed="false" />
                    </StackPane>
                    <ImageView fx:id="toggleEye" fitWidth="20" fitHeight="20" pickOnBounds="true" preserveRatio="true">
                        <StackPane.margin>
                            <Insets right="10"/>
                        </StackPane.margin>
                        <image>
                            <Image url="@/Images/eye.gif" />
                        </image>
                    </ImageView>
                </StackPane>

                <TextField fx:id="telField" promptText="Numéro de téléphone" styleClass="input-field" />
                <TextField fx:id="cinField" promptText="Carte d'identité" styleClass="input-field" />

                <ComboBox fx:id="roleComboBox" styleClass="input-field" promptText="Rôle">
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="Agriculteur"/>
                            <String fx:value="Client"/>
                            <String fx:value="Ouvrier"/>
                        </FXCollections>
                    </items>
                </ComboBox>

                <!-- Ouvrier-specific fields - now stacked vertically like other fields -->
                <VBox fx:id="ouvrierFields" visible="false" managed="false" spacing="15">
                    <DatePicker fx:id="disponibilityField" promptText="Disponibilité" styleClass="input-field" />
                    <TextField fx:id="locationField" promptText="Localisation" styleClass="input-field" />
                    <TextField fx:id="experienceField" promptText="Expérience (années)" styleClass="input-field" />
                </VBox>

                <Button fx:id="signupButton" text="S'inscrire" styleClass="green-button"/>

                <HBox alignment="CENTER" spacing="5">
                    <Label text="Vous avez déjà un compte ?" />
                    <Hyperlink fx:id="login" text="Se connecter" />
                </HBox>

            </VBox>
        </AnchorPane>
    </center>
</BorderPane>