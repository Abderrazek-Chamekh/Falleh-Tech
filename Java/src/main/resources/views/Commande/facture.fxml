<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.*?>

<BorderPane fx:id="borderPane" prefHeight="700" prefWidth="800" stylesheets="@facture.css"
            xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="tn.esprit.Controllers.E_Commerce.FactureController">

    <!-- Header Section -->
    <top>
        <VBox styleClass="header">
            <HBox alignment="CENTER_LEFT">
                <Label text="FallehTech" styleClass="company-name"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="FACTURE" styleClass="invoice-title"/>

            </HBox>

            <HBox styleClass="invoice-info">
                <VBox spacing="5">
                    <Label text="Facture N°:" styleClass="info-label"/>
                    <Label fx:id="commandeIdLabel" styleClass="info-value"/>
                    <Label text="Date:" styleClass="info-label"/>
                    <Label fx:id="dateLabel" styleClass="info-value"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <VBox spacing="5" alignment="TOP_RIGHT">
                    <Label text="Client:" styleClass="info-label"/>
                    <Label fx:id="clientNameLabel" styleClass="info-value"/>

                </VBox>
            </HBox>
        </VBox>
    </top>

    <!-- Center Content -->
    <center>
        <VBox spacing="20" styleClass="items-container">
            <!-- Items Table -->
            <TableView fx:id="tableProduits" styleClass="items-table">
                <columns>
                    <TableColumn fx:id="colProduit" text="Désignation" styleClass="table-column"/>
                    <TableColumn fx:id="colQuantite" text="Quantité" styleClass="table-column"/>
                    <TableColumn fx:id="colPrixUnitaire" text="Prix Unitaire (TND)" styleClass="table-column"/>
                    <TableColumn fx:id="colTotal" text="Total (TND)" styleClass="table-column"/>
                </columns>
            </TableView>

            <!-- Totals Section -->
            <GridPane styleClass="totals-grid">
                <columnConstraints>
                    <ColumnConstraints hgrow="ALWAYS" halignment="RIGHT"/>
                    <ColumnConstraints halignment="RIGHT" prefWidth="150"/>
                </columnConstraints>

                <Label text="Sous-total:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="total-label"/>
                <Label fx:id="subtotalLabel" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="total-value"/>

                <Label text="TVA (19%):" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="total-label"/>
                <Label fx:id="tvaLabel" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="total-value"/>

                <Label text="Total TTC:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="total-ttc-label"/>
                <Label fx:id="totalLabel" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="total-ttc-value"/>
            </GridPane>
        </VBox>
    </center>

    <!-- Footer Section -->
    <bottom>
        <VBox styleClass="footer">
            <Separator/>
            <HBox alignment="CENTER_RIGHT" spacing="10">
                <Button text="Télécharger PDF" onAction="#handleDownloadPDF" styleClass="pdf-button"/>
            </HBox>
            <Label text="Merci pour votre confiance!" styleClass="thank-you"/>
            <Label text="MyCompany - 123 Rue de Commerce, Tunis - Tél: 70 123 456" styleClass="company-info"/>
        </VBox>
    </bottom>

</BorderPane>