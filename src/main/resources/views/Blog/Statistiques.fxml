<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.*?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="tn.esprit.Controllers.Blog.Post.PostStatsController"
      stylesheets="@stat.css"
      alignment="CENTER" spacing="20">

    <!-- Header Section -->
    <StackPane>
        <Rectangle arcWidth="10" arcHeight="10" height="60"
                   styleClass="header-rectangle"/>
        <Label text="POST ANALYTICS DASHBOARD" styleClass="dashboard-title"/>
    </StackPane>

    <!-- Stats Cards Row -->
    <HBox alignment="CENTER" spacing="20" styleClass="stats-cards-container">
        <VBox styleClass="stats-card" fx:id="totalPostsCard">
            <Label text="TOTAL POSTS" styleClass="stats-card-title"/>
            <Label fx:id="totalPostsLabel" styleClass="stats-card-value"/>
        </VBox>

        <VBox styleClass="stats-card" fx:id="categoriesCard">
            <Label text="CATEGORIES" styleClass="stats-card-title"/>
            <Label fx:id="categoriesCountLabel" styleClass="stats-card-value"/>
        </VBox>

        <VBox styleClass="stats-card" fx:id="activeMonthCard">
            <Label text="MOST ACTIVE MONTH" styleClass="stats-card-title"/>
            <Label fx:id="activeMonthLabel" styleClass="stats-card-value"/>
        </VBox>
    </HBox>

    <!-- Charts Section -->
    <GridPane hgap="20" vgap="20" alignment="CENTER">
        <columnConstraints>
            <ColumnConstraints percentWidth="50"/>
            <ColumnConstraints percentWidth="50"/>
        </columnConstraints>

        <!-- Left Column - Pie Chart -->
        <VBox GridPane.columnIndex="0" styleClass="chart-container">
            <Label text="POST DISTRIBUTION BY CATEGORY" styleClass="chart-title"/>
            <PieChart fx:id="categoryPieChart" legendVisible="true" styleClass="chart"/>
            <Label fx:id="pieChartNote" styleClass="chart-note"/>
        </VBox>

        <!-- Right Column - Bar Chart -->
        <VBox GridPane.columnIndex="1" styleClass="chart-container">
            <Label text="MONTHLY POST ACTIVITY" styleClass="chart-title"/>
            <BarChart fx:id="monthlyBarChart" legendVisible="false" styleClass="chart">
                <xAxis>
                    <CategoryAxis fx:id="monthAxis" label="Month" />
                </xAxis>
                <yAxis>
                    <NumberAxis fx:id="postCountAxis" label="Number of Posts" />
                </yAxis>
            </BarChart>
            <Label fx:id="barChartNote" styleClass="chart-note"/>
        </VBox>
    </GridPane>

    <!-- Footer -->
    <Button text="CLOSE DASHBOARD" onAction="#handleClose" styleClass="close-button"/>
</VBox>